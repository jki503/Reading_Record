# 제 8장 누가 액세스하고 있는지를 확인하는 인증

## 8.1 인증이란

> 서버에 액세스하고 잇는 상대의 클라이언트를 확인하는 것

## 8.2 BASIC 인증

</br>

> BASIC 인증은 HTTP/1.0에 구현된 인증 방식으로 현재에도 일부 사용되고 있다.  
> BASIC 인증은 웹 서버와 대응하고 있는 클라이언트 사이에서 이뤄지는 인증 방식이다.

</br>

- 클라이언트가 리퀘스트 송신
- 서버가 상태코드 401로 인증이 필요하다는 것을 전달
- 유저 ID와 Password로 Base64로 인코딩하여 송신
- 인증 성공시 200 응답, 실패시 401 다시 응답

</br>

> BASE64 인코딩 형식을 사용하지만, 이는 암호화가 아니다.  
> 따라서 아무런 조작 없이도 복호화하여 개인정보를 탈취할 수 있다.

</br>

## 8.3 DIGEST 인증

</br>

> BASIC 인증과 다르게 유저 개인정보를 있는 그대로 직접 보내지 않고  
> 챌린지 리스폰스 방식을 사용하고 있다.

- 챌린지 리스폰스 방식
  - 최초에 상대방에게 인증 요구를 보내고 상대방 측에서 받은 챌린지 코드를 사용해서 리스폰스 코드를 계산
  - 이 값을 상대에게 송신하여 인증하는 방법

</br>

### 8.3.1 DIGEST 인증 수순

- 클라이언트가 리퀘스트 송신
- 서버가 인증이 필요하다는 것을 전달하는 401과 함께 패스워드와 챌린지 코드 송신
- 클라이언트가 패스워드와 챌린지 코드에서 리스폰스 코드를 계산해서 송신
- 서바가 인증 성공시에 상태코드 200 실패하면 401로 응답

> DIGEST 인증도 BASIC 인증과 마찬가지로 사용상의 문제와 많은 웹사이트에서 요구되는  
> 보안등급에 미치지 못한다는 점에서 그다지 사용되고 있지 않다.

</br>

## 8.4 SSL 클라이언트 인증

</br>

> SSL 클라이언트 인증은 HTTPS 클라이언트 인증서를 이용한 인증 방식이다.  
> HTTPS 장에서 설명했던 클라이언트 증명서를 인증할 때에 사용하는 방식으로  
> 사전에 등록된 클라이언트에서의 액세스인지 아닌지를 확인할 수 있다.

### 8.4.1 SSL 클라이언트 인증의 인증 수순

- 인증이 필요한 리소스의 리퀘스트가 있엇을 경우에는 서버는 클라이언트에게 클라이언트 증명서를 요구하는 Certificate Request라는 메시지를 송신한다.
- 유저는 송신하는 클라이언트 증명서를 선택한다. 그리고 클라이언트는 클라이언트 증명서를 Client Certificate라는 메시지를 송신한다.
- 서버는 클라이언트 증명서를 검증하여 검증 결과가 정확하다면 클라이언트의 공개키를 취득한다. 그 이후에 HTTPS에 의한 암호를 개시한다.

</br>

### 8.4.2 SSL 클라이언트 인증은 2-factor 인증에서 사용된다

> SSL 클라이언트 인증은 대부분의 경우 단독으로 사용되지 않고, 폼베이스 인증과 합쳐서 2-factor 인증의 하나로서 사용된다.  
> 2-factor 인증이란 패스워드라는 ㅎㄴ개의 요소만이 아닌 이용자가 가진 다른 정보와 함꼐 인증하는 방법  
> 즉 첫번째 인증 정보로 SSL 클라이언트 인증을 사용하여 클라이언트의 컴퓨터를 인증하고 다른 인증 정보로서 패스워드를 사용하여 유저의 본인 확인을 한다.  
> 이로 인해 본인이 올바른 컴퓨터에서 액세스하고 있음을 확인한다.

</br>

## 8.5 폼 베이스 인증

</br>

> 폼베이스 인증은 HTTP 프로토콜로서 사양이 정의되어 있는 인증방식은 아니다.  
> 클라이언트가 서버 상의 웹 애플리케이션에 자격 정보를 송신하여 그 자격 정보의 검증 결과에 따라 인증을 하는 방식이다.  
> OAUTH인 것같은데

</br>

### 8.5.2 세션관리와 쿠키에 의한 구현

</br>

> Oauth든 일반 인증이든 기본적으로 HTTP는 무상태성 프로토콜이다.  
> 상태관리 기능을 보충하기 위해 쿠키, 세션, 토큰을 사용한다.

</br>

> 쿠키든, 세션이든, JWT든 기본적으로 사용자가 인증을 POST로 요청하면  
> 그에 대한 세션 ID나 토큰 값을 클라이언트에게 내려준다.  
> 그리고 이후부터 클라이언트는 해당 값을 헤더에 실어서 인증처리를 받는다.

</br>
