# 제 7장 웹을 안전하게 지켜주는 HTTPS

## 7.1 HTTP의 약점

</br>

### 7.1.1 평문이기 때문에 도청 가능

</br>

> HTTP를 사용한 리퀘스트나 리스폰스는 HTTP 자신을 암호화하는 기능은 없기 때문에  
> 통신 전체가 암호화 되지 않는다.  
> 즉 요청과 응답이 평문으로 통신 된다.

</br>

- TCP/IP는 도청 가능한 네트워크
  - 암호화 되어 있지 않은 통신에 약점이 있는 이유는 TCP/IP 구조의 통신 내용은 전부 도청 가능
  - 암호화 된 메시지 속의 의미는 간파할 수 없지만, 암호화 메시지 자체도 도청 가능
  - 같은 게그먼트 통신에서 패킷을 수집하여 해석..
  - 패킷 캡처(wireshark)나 스니퍼라는 툴을 사용해서 가능

> 따라서 암호화로부터 패킷이 탈취되는 것을 방지하는 기법을 사용해야한다.

</br>

- 통신 암호화
  - HTTP는 암호화 구조는 없지만 SSL이나 TLS라는 다른 프로토콜을 조합하여 HTTP의 통신을 암호활 수 있다.
  - SSL등을 사용해 안전한 통신로를 확립하고 나서 그 통신로를 사용해 HTTP를 HTTPS나 HTTP over SSL이라고 부른다.

</br>

- 콘텐츠 암호화
  - HTTP를 사용해서 운반하는 내용을 암호화 하는 것, 즉 HTTP 메시지에 포함되는 컨텐츠만 암호화 하는 것이다.
  - 이 경우 클라이언트에서 메시지를 암호화해서 출력하는 처리가 필요하다.
  - 클라이언트 <-> 서버가 컨텐츠의 암복호화 구조를 가지고 있어야 함으로 평소에 유저가 사용되는 브라우저와 웹 서버에서 사용 어려움

### 7.1.2 통신 상대를 확인하지 않기 때문에 위장 가능

</br>

> HTTP를 사용한 리퀘스트나 리스폰스에서는 통신 상대를 확인하지 않는다.  
> 리퀘스트를 보낸 서버가 정말로 URI에서 지정된 호스트인지 아닌지,  
> 리스폰스를 반환한 클라이언트가 정말로 리퀘스트를 출력한 클라이언트인지 아닌지 모른다.

</br>

- 누구나 리퀘스트를 할 수 있다.
  - 상대가 누구인지 확인하는 처리가 없기 때문에 누구든지 리퀘스트를 보낼 수 있다.
  - 또한 리퀘스트가 오면 상대가 누구든지 무언가의 리스폰스를 반환한다
  - 상대가 누구인지 확인하지 않는다.
    - 본래 위장한 웹서버일 수도 있다.
    - 리스폰스를 반환한 클라이언트가 의도한 클라이언트인지 모른다.
    - 통신하고 있는 상대가 액세스 권한이 없는 상대일 수도 있다.
    - 의미없는 리퀘스트라도 수신하게 됨으로 Dos, DDos 공격을 피할 수 없다.

</br>

- 상대를 확인하는 증명서
  - HTTP에서는 통신 상대를 확인할 수 없지만 SSL로 가능하게 할 수 있다.
  - SSL은 암호화 뿐만 아니라 상대를 확인하는 수단으로 증명서를 제공하고 있다.
  - 증명서는 CA가 발행하는 것임으로 서버나 클라이언트가 실재하는 사실 증명

</br>

### 7.1.3 완전성을 증명할 수 없기 때문에 변조 가능

</br>

> 완전성이란 정보의 정확성을 가리킨다.  
> 그것을 증명할 수 없다는 것은 정보가 정확한지 아닌지를 확인할 수 없음을 의미한다.

</br>

- 수신한 내용이 다를지도 모른다.
  - HTTP가 완전성을 증명할 수 없다는 뜻은 통신 중간에 변조되어도 모른다는 것이다.
  - A -> B의 요청이나 응답이 같을지 알 수 없다는 것
  - 이와 같이 공격자가 도중에 리퀘스트나 리스폰스를 탈취해 변조하는 공격을 Man-in-the-Middle 공격이라고 부른다.

</br>

- 변조를 방지하려면?
  - MD5나 SHA-1등의 해시 값을 확인하는 방법
  - 파일의 디지털 서명을 확인하는 방법
  - 하지만 이역시 완전한 방법은 아니다.
    - 해시도 솔직히 레인보우 테이블로 GPU로 브루트포스 찍으면 뚫린다..
  - 결론은 HTTPS
    </br>

## 7.2 HTTP + 암호화 + 인증 + 완전성 보호 = HTTPS

</br>

</br>
