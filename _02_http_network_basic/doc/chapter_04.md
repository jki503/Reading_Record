# 제 4장 결과를 전달하는 HTTP 상태 코드

## 4.1 상태코드는 서버로부터 리퀘스트 결과를 전달한다

</br>

- 상태 코드의 역할
  - HTTP 요청에 대한 결과가 어떻게 되었는지를 알려주는 것이다.

|     |    클래스     |                    설명                     |
| :-: | :-----------: | :-----------------------------------------: |
| 1xx | Informational |         리퀘스트를 받아들여 처리중          |
| 2xx |    Success    |       리퀘스트를 정상적으로 처리했음        |
| 3xx |  Redirection  | 리퀘스트를 완료하기 위해서 추가 동작이 필요 |
| 4xx | Client Error  |         서버는 리퀘스트 이해 불가능         |
| 5xx | Server Error  |          서버는 리퀘스트 처리 실패          |

- 클래스의 정의만 지킨다면 RFC 2616에서 정의된 상태 보드 변경 및 생성 가능

</br>

## 4.2 2xx성공(Success)

</br>

- 200: 정상 응답
- 201: 생성 완료
- 204: No content
- 206: Partial Content
  - Range에 의해서 범위가 지정된 리퀘스트에 대해 서버가 부분적 Get 리퀘스트 받았음을 표시

</br>

## 4.3 3xx리다이렉트(Redirection)

</br>

> 리퀘스트가 아직 종료되지 않았고, 클라이언트에게 특정 처리를 알린다.

</br>

- 301: Moved Permanently
  - 해당 리소스가 변경되어 새로운 리소스로 요청을 다시 해야한다고 알리는 것
- 302: Found
  - 301과 유사하지만, 임시적이 URI로 Location 헤더 전달
- 303: See Other
  - 302와 유사하지만 리다이렉트 장소를 Get 메소드로 얻어야 한다고 명확하게 표현하는 것
- 304: Not Modified
  - 리다이렉트와는 관계가 없으며, 조건부 리퀘스트에 대한 액세스는 허락하지만 조건이 충족되지 않았음을 표시
  - 304에서는 리스폰스 바디에 어떠한 것도 포함되어 있으면 안된다.
- 307: Temporary Redirect
  - 302와 비슷하지만 POST -> GET으로 치환하지 않는다.

</br>

## 4.4 4xx클라이언트 에러(Client Error)

</br>

- 400: Bad Request
  - 잘못된 요청을 했을때
- 401: Unauthorized
- 403: Forbidden
- 404: Not Found
  - 요청한 리소스가 없을때
- 405: Method Not Allowed
  - 요청한 http 메서드가 서버가 작성한 http 메서드와 일치하지 않을때

</br>

### 401과 403의 차이

> 401은 해당 클라이언트가 인증되지 않았거나, 유효한 인증 자격 증명이 없을때 리퀘스트가 거부되는 것이고  
> 403은 인증된 클라이언트에 대해 접근권한이 부족하여 요청을 거절하는 것이다.

- 401은 로그인이 안되어있을때
- 403은 로그인은 되었는데, 권한이 없을때!

### 400과 404의 차이

> 예를들어 유저가 갖고있는 아이템1을 요청한 상황에서  
> 유저가 아이템1이 없을때 BAD REQUEST일까 NOT FOUND일까
>
> 실제 개발 경험이 없을때 이런 부분을 팀원들하고 고민을 많이했었는데  
> 아예 없는 엔티티 리소스를 요청했을때 404로 내려주고  
> 진짜 잘못된 요청일때 400번을 주었다.
>
> 예를들면 은행 잔고가 5000원이고 출금을 50000원 한다 했을때  
> 이는 잘못된 요청임으로 이 경우 BAD REQUEST 처리를 했다.
>
> 개발 팀에서 아예 예외처리도 이부분은 나눠서 진행했다
> IllegalArgumentException같은 경우 -> 400
> NoSuchElementException같은 경우 -> 404

</br>

## 4.6 5xx서버 에러(Server Error)

</br>

- 500: Internal Server Error
- 503: Service Unavailable

</br>

## 실제 내 개발 경험에서

> 책에서 설명한 것보다 상태코드는 훨씬 더 많다.  
> 책에서처럼 실제 개발에서 그렇게 많은 상태코드를 관리하지 않는 이유는  
> 상태코드 자체는 클라이언트 - 서버가 서로 소통하기 위한 용도임으로  
> 너무 많은 상태 코드 관리를 할 경우 상태코드 컨벤션을 찾느라 번거롭다.
>
> 실제 개발에서
> 200, 201을 가장 많이 썼고, 204의 경우 사용하지 않은 경우도 있었다.  
> 400, 401, 403, 404
